<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Hosting Your Own · Registrator.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Registrator.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li class="current"><a class="toctext" href>Hosting Your Own</a><ul class="internal"><li><a class="toctext" href="#Running-the-Registrator-server-1">Running the Registrator server</a></li><li><a class="toctext" href="#Config-file-1">Config file</a></li><li><a class="toctext" href="#GitHub-permissions-and-subscribed-events-for-the-app-1">GitHub permissions and subscribed events for the app</a></li><li><a class="toctext" href="#Private-packages-and-registries-1">Private packages and registries</a></li><li><a class="toctext" href="#Allow-private-organization-members-to-register-1">Allow private organization members to register</a></li><li><a class="toctext" href="#The-approved()-call-1">The approved() call</a></li></ul></li><li><a class="toctext" href="../docker/">Using Docker</a></li><li><a class="toctext" href="../commentbot/">Comment Bot</a></li><li><a class="toctext" href="../webui/">Web UI</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Hosting Your Own</a></li></ul><a class="edit-page" href="https://github.com/JuliaRegistries/Registrator.jl/blob/master/docs/src/hosting.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Hosting Your Own</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Registrator-Documentation-1" href="#Registrator-Documentation-1">Registrator Documentation</a></h1><p>This document describes how you can host your own instance of Registrator.</p><h2><a class="nav-anchor" id="Running-the-Registrator-server-1" href="#Running-the-Registrator-server-1">Running the Registrator server</a></h2><p>There are three components:</p><ol><li>Comment Bot: A GitHub comment listener bot</li><li>WebUI: A web UI</li><li>Registration service: A backend service to which the above components talk to.</li></ol><p>This can be run as a standalone server or as a docker container. See <code>build.md</code> directory for instructions on how to build the docker image.</p><p>You can use <code>make</code> to control the components of registrator. The <code>Makefile</code> can be found in the <code>run</code> directory. Commands:</p><ol><li><p><code>make start-all</code></p></li><li><p><code>make start-regservice</code></p></li><li><p><code>make start-commentbot</code></p></li><li><p><code>make start-webui</code></p></li><li><p><code>make stop-all</code></p></li><li><p><code>make stop-regservice</code></p></li><li><p><code>make stop-commentbot</code></p></li><li><p><code>make stop-webui</code></p></li><li><p><code>make restart-all</code></p></li><li><p><code>make restart-regservice</code></p></li><li><p><code>make restart-commentbot</code></p></li><li><p><code>make restart-webui</code></p></li></ol><h2><a class="nav-anchor" id="Config-file-1" href="#Config-file-1">Config file</a></h2><p>See <code>run/sample.toml</code> for description of entries in the config file.</p><h2><a class="nav-anchor" id="GitHub-permissions-and-subscribed-events-for-the-app-1" href="#GitHub-permissions-and-subscribed-events-for-the-app-1">GitHub permissions and subscribed events for the app</a></h2><p>You will need read-only permission for: Repository contents, Repository Metadata</p><p>You will need read permission for: Issues, Commit Statuses</p><p>You will need to subscribe to the following events: Issue comment and commit comment</p><h2><a class="nav-anchor" id="Private-packages-and-registries-1" href="#Private-packages-and-registries-1">Private packages and registries</a></h2><p>Do not install the public Registrator on your private packages and Registries. Please host your own Registrator for this.</p><p>If you do host your own Registrator, you can set it up on your private package:</p><ul><li>Set <code>disable_private_registrations</code> to <code>false</code> in the configuration.</li><li>Add the GitHub user that you mention in the configuration file as a collaborator to the private Registry and package.</li><li>Install the GitHub app on the repository.</li></ul><h2><a class="nav-anchor" id="Allow-private-organization-members-to-register-1" href="#Allow-private-organization-members-to-register-1">Allow private organization members to register</a></h2><ul><li>Set <code>check_private_membership</code> to <code>true</code> in the configuration file</li><li>Add the GitHub user that you mention in the configuration file as a member to the organization(s)</li></ul><h2><a class="nav-anchor" id="The-approved()-call-1" href="#The-approved()-call-1">The approved() call</a></h2><p>The approved() call is a comment you make on a Registry PR. This is <em>disabled</em> on the public Registrator as it requires write access to the repository. It does the following:</p><ol><li>If <code>register()</code> was called on a Pull request then that Pull request is merged.</li><li>A tag and release with the appropriate version is created on the package repository.</li><li>The Pull request on the Registry is merged.</li><li>If <code>register()</code> was called on an issue, that issue is closed.</li></ol><p>Note that you need to install the Registrator app on the Registry for approval process to work.</p><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="../docker/"><span class="direction">Next</span><span class="title">Using Docker</span></a></footer></article></body></html>
